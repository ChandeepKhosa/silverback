(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{113:function(e,t,o){e.exports=o.p+"assets/img/debugging-browser.8608339e.png"},208:function(e,t,o){e.exports=o.p+"assets/img/debugging-phpstorm-start.fab8dabd.png"},209:function(e,t,o){e.exports=o.p+"assets/img/debugging-phpstorm-breakpoint.a3c05666.png"},210:function(e,t,o){e.exports=o.p+"assets/img/debugging-phpstorm-stop.dbee2367.png"},236:function(e,t,o){"use strict";o.r(t);var r=o(0),i=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"debugging"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#debugging","aria-hidden":"true"}},[e._v("#")]),e._v(" Debugging")]),e._v(" "),r("p",[r("strong",[e._v("Xdebug")]),e._v(" is a great tool for PHP to step debug. Unfortunately it slows down PHP by around 20-25%. For tests and "),r("code",[e._v("drush")]),e._v(" commands, it can be even slower.")]),e._v(" "),r("p",[e._v("To mitigate this problem for web browser requests, Amazee.io inspects the parameters and cookies of your request and if it finds the string "),r("code",[e._v("xdebug")]),e._v(", it automatically forwards the request to a PHP process which has Xdebug enabled.")]),e._v(" "),r("p",[e._v("These instructions describe using PHPStorm as the code editor for debugging. To use Visual Studio Code, you will need to install the "),r("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=felixfbecker.php-debug",target:"_blank",rel:"noopener noreferrer"}},[e._v("PHP Debug Adapter"),r("OutboundLink")],1),e._v(". @TODO: Add "),r("a",{attrs:{href:"https://github.com/AmazeeLabs/silverback/blob/master/docs/development/debugging.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("docs for how to configure VSC"),r("OutboundLink")],1),e._v(" to work with Amazee.io docker containers.")]),e._v(" "),r("h2",{attrs:{id:"debugging-php-or-twig-files"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#debugging-php-or-twig-files","aria-hidden":"true"}},[e._v("#")]),e._v(" Debugging PHP or Twig files")]),e._v(" "),r("p",[e._v("You will need to setup your browser so that it triggers an Xdebug session. This can be done with bookmarklets or with a browser extension. This only needs to be installed once per browser.")]),e._v(" "),r("ul",[r("li",[e._v("Bookmarklets (works with any browser): https://www.jetbrains.com/phpstorm/marklets/")]),e._v(" "),r("li",[e._v("Chrome extension: "),r("a",{attrs:{href:"https://chrome.google.com/webstore/search/xdebug",target:"_blank",rel:"noopener noreferrer"}},[e._v("Xdebug Helper"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Firefox add-on: "),r("a",{attrs:{href:"https://addons.mozilla.org/en-US/firefox/addon/xdebug-helper-for-firefox/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Xdebug Helper"),r("OutboundLink")],1)])]),e._v(" "),r("p",[r("strong",[e._v("Note on Twig debugging:")]),e._v(" Twig debugging won't work on old Silverback sites. Ensure "),r("code",[e._v("sites/default/amazeeio.development.services.yml")]),e._v(" file has "),r("code",[e._v("parameters: twig.config: cache")]),e._v(" set to "),r("code",[e._v("true")]),e._v(". If it is set to "),r("code",[e._v("false")]),e._v(", you can safely commit the change to your git repository.")]),e._v(" "),r("p",[r("strong",[e._v("Note on Windows debugging:")]),e._v(" If you are using Windows, you will first need to install some software. See the section below on "),r("a",{attrs:{href:"#debugging-on-windows-10"}},[e._v("Debugging on Windows 10")]),e._v(".")]),e._v(" "),r("h3",{attrs:{id:"at-the-start-of-your-debugging-session…"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#at-the-start-of-your-debugging-session…","aria-hidden":"true"}},[e._v("#")]),e._v(" At the start of your debugging session…")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("Restart the docker container to turn on Xdebug connections.")]),e._v(" "),r("ol",[r("li",[e._v("In the Silverback project root directory, edit the "),r("code",[e._v("docker-compose.yml")]),e._v(" file. Edit the following line to remove the "),r("code",[e._v("#")]),e._v(" comment character from its beginning:"),r("div",{staticClass:"language-yaml line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-yaml"}},[r("code",[r("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("XDEBUG_ENABLE")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"true"')]),e._v("\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])])]),e._v(" "),r("li",[e._v("Restart the local docker container with:"),r("div",{staticClass:"language-shell script line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker-compose up -d`\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])])])])]),e._v(" "),r("li",[r("p",[e._v("Setup PHPStorm to debug your file.")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("In the top-right palette of icons in your PHPStorm window, click the “Start Listening for PHP Debug Connections” button. Or select that option from PHPStorm’s “Run” pull-down menu.")]),e._v(" "),r("p",[r("img",{attrs:{src:o(208),alt:'The button looks like a 80s-style phone with a red "no" symbol next to the hearing end.'}})])]),e._v(" "),r("li",[r("p",[e._v("At the line of code you'd like to examine, look in the left gutter and click to the right of the line number to add a breakpoint for this line. A red dot will appear to indicate a breakpoint has been set.")]),e._v(" "),r("p",[r("img",{attrs:{src:o(209),alt:"A line of PHP code in PHPStorm with a red dot to its left"}})])])])]),e._v(" "),r("li",[r("p",[e._v("Trigger the debugging with your web browser.")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("Open your web browser to the web page you want to debug.")])]),e._v(" "),r("li",[r("p",[e._v("Turn on Xdebug with your browser extension or bookmarklet. Either click on the bookmarklet to run its JavaScript code or click on the browser extension's buttons.")]),e._v(" "),r("p",[r("img",{attrs:{src:o(113),alt:"A web browser's bookmarks bar with two bookmarklets for starting and stopping the debugger"}})])]),e._v(" "),r("li",[r("p",[e._v("Reload the page to begin the debugging session.")])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("When debugging Twig files")]),e._v(", you will need to reload the page one extra time. The first time the page loads after your change, Twig will compile the "),r("code",[e._v(".twig")]),e._v(" template to a PHP file which it will save in its cache at the end of the first reload. On the second reload, PHPStorm will be able to debug your "),r("code",[e._v(".twig")]),e._v(" template using the cached PHP file in the background.")])])])])]),e._v(" "),r("h3",{attrs:{id:"at-the-end-of-your-debugging-session…"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#at-the-end-of-your-debugging-session…","aria-hidden":"true"}},[e._v("#")]),e._v(" At the end of your debugging session…")]),e._v(" "),r("p",[e._v("If you fail to turn off debugging, you will notice "),r("code",[e._v("drush")]),e._v(" commands being extremely slow.")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("In the top-right palette of icons in your PHPStorm window, click the “Stop Listening for PHP Debug Connections” button. Or select that option from PHPStorm’s “Run” pull-down menu.")]),e._v(" "),r("p",[r("img",{attrs:{src:o(210),alt:"The button looks like a 80s-style phone with a sound symbol next to the hearing end."}})])]),e._v(" "),r("li",[r("p",[e._v("Stop triggering a debug session on your web browser, by doing one of the following:")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("Turn off Xdebug with your browser extension or bookmarklet. Either click on the “stop debugger” bookmarklet or click on the browser extension's buttons.")]),e._v(" "),r("p",[r("img",{attrs:{src:o(113),alt:"A web browser's bookmarks bar with two bookmarklets for starting and stopping the debugger"}})])]),e._v(" "),r("li",[r("p",[e._v("Or, just close the browser window with the web page you were debugging.")])])])]),e._v(" "),r("li",[r("p",[e._v("The previous two steps should be sufficient. Optionally, restart the docker container to turn off Xdebug connections.")]),e._v(" "),r("ol",[r("li",[e._v("In the Silverback project root directory, edit the "),r("code",[e._v("docker-compose.yml")]),e._v(" file. Edit the following line to add the "),r("code",[e._v("#")]),e._v(" comment character to its beginning:"),r("div",{staticClass:"language-yaml line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-yaml"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v('#XDEBUG_ENABLE: "true"')]),e._v("\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])])]),e._v(" "),r("li",[e._v("Restart the local docker container with:"),r("div",{staticClass:"language-shell script line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker-compose up -d`\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])])])])])]),e._v(" "),r("h2",{attrs:{id:"debugging-tests"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#debugging-tests","aria-hidden":"true"}},[e._v("#")]),e._v(" Debugging Tests")]),e._v(" "),r("p",[e._v("@TODO")]),e._v(" "),r("h2",{attrs:{id:"debugging-on-windows-10"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#debugging-on-windows-10","aria-hidden":"true"}},[e._v("#")]),e._v(" Debugging on Windows 10")]),e._v(" "),r("p",[e._v("Before you can debug on Windows 10, you will need to install and configure a loopback adapter.")]),e._v(" "),r("ol",[r("li",[e._v("Install a Loopback adapter.\n"),r("ol",[r("li",[e._v("Click Start, then type "),r("code",[e._v("cmd")]),e._v(" in the search box.")]),e._v(" "),r("li",[e._v("When "),r("code",[e._v("cmd.exe")]),e._v(" appears, right-click and choose Run as administrator.")]),e._v(" "),r("li",[e._v("In the command prompt, type "),r("code",[e._v("hdwwiz.exe")]),e._v(" and press "),r("code",[e._v("Enter")]),e._v(".")]),e._v(" "),r("li",[e._v("Click Next.")]),e._v(" "),r("li",[e._v("Select "),r("code",[e._v("Install the hardware that I manually select from a list (Advanced)")]),e._v(", then click Next.")]),e._v(" "),r("li",[e._v("Select "),r("code",[e._v("Network adapters")]),e._v(", then click Next.")]),e._v(" "),r("li",[e._v("Select "),r("code",[e._v("Microsoft")]),e._v(" as the manufacturer, select "),r("code",[e._v("Microsoft KM-TEST Loopback Adapter")]),e._v(" as the adapter for Windows 10, then click Next.")]),e._v(" "),r("li",[e._v("Select Next to confirm the installation.")]),e._v(" "),r("li",[e._v("Select Finish to complete the installation.")])])]),e._v(" "),r("li",[e._v("Configure the loopback adapter.\n"),r("ol",[r("li",[e._v("Click "),r("code",[e._v("Start > Settings > Network & Internet > Wi-Fi")]),e._v(".")]),e._v(" "),r("li",[e._v("Under "),r("code",[e._v("related settings")]),e._v(", click "),r("code",[e._v("change adapter options")]),e._v(".")]),e._v(" "),r("li",[e._v("Select the newly created connection.")]),e._v(" "),r("li",[e._v("Right-click on the selected connection and choose "),r("code",[e._v("Properties")]),e._v(" from the menu.")]),e._v(" "),r("li",[e._v("Confirm that "),r("code",[e._v("Microsoft Loopback Adapter")]),e._v(" or "),r("code",[e._v("Microsoft Loopback Adapter #")]),e._v(" is displayed in the "),r("code",[e._v("Connect Using:")]),e._v(" field. If it is not, retry properties for another adapter.")]),e._v(" "),r("li",[e._v("Deselect everything except "),r("code",[e._v("Internet Protocol 4 (TCP/IPv4)")]),e._v(".")]),e._v(" "),r("li",[e._v("Select "),r("code",[e._v("Internet Protocol 4 (TCP/IPv4)")]),e._v(", and click "),r("code",[e._v("Properties")]),e._v(" to open "),r("code",[e._v("Internet Protocol 4 (TCP/IPv4)")]),e._v(" Properties.")]),e._v(" "),r("li",[e._v("Select "),r("code",[e._v("Use the following IP address")]),e._v(". Fill in the IP address and Subnet mask with the following:"),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("IP address: 172.16.172.16\nSubnet mask: 255.255.255.0\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])])]),e._v(" "),r("li",[e._v("Click "),r("code",[e._v("Advanced")]),e._v(" to open "),r("code",[e._v("Advanced TCP/IP Settings")]),e._v(".")]),e._v(" "),r("li",[e._v("Switch to the "),r("code",[e._v("WINS")]),e._v(" tab and select "),r("code",[e._v("Disable NetBIOS over TCP/IP")]),e._v(".")]),e._v(" "),r("li",[e._v("Click OK to close "),r("code",[e._v("Advanced TCP/IP")]),e._v(" Settings.")]),e._v(" "),r("li",[e._v("Click OK to close the "),r("code",[e._v("Internet Protocol (TCP/IP)")]),e._v(" Properties.")]),e._v(" "),r("li",[e._v("Click OK to close the connection properties.")])])]),e._v(" "),r("li",[e._v("Follow the instructions above under "),r("a",{attrs:{href:"#debugging-php-or-twig-files"}},[e._v("Debugging PHP or Twig files")]),e._v(".")])])])}),[],!1,null,null,null);t.default=i.exports}}]);